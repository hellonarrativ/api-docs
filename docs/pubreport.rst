Publisher Report
================

The Publisher Report contains click and order data.
It is published to an S3 bucket accessible by the partner.
The report is published on configurable interval which defaults to 24 hours.
Each interval publishes data for the last 7 days.
The naming convention is:

* Prefix: ``/<key>/YYYY/MM/`` (defaults to slug)
* Clicks: ``narrativ_log_files_clicks_YYYYMMDD HH:00.csv``
* Orders: ``narrativ_log_files_orders_YYYYMMDD HH:00.csv``

The partner's report reader should be compatible with Python's ``csv.DictWriter``

Contact your account manager to get started.

Schema
------

Clicks
^^^^^^

======================  ===========
Column                  Description
======================  ===========
click_id                Unique identifier for each click event
click_timestamp         Date Time of click in GMT
cookie_id               The cookie ID
article_url             For clicks: this is the URL which has the link that was clicked on; For impressions: the page URL that was viewed
is_clean_article_url    Bool: true if article url was passed to Howl during link creation; False if no url was passed to Howl and we read url from the page
referrer                Referrer from web browser
user_agent              User agent from web browser
is_click                Boolean flag to indicate click vs impressions Is_click will equal 1 when the record is a click, and 0 when the record is an impression
click_product_url       Product URL of the link that was clicked on
earnings                Earning for publisher. ​Please note this includes all payment models
click_product_category  Category of the product that was clicked on
click_is_brand_page     Boolean: true is the link that was clicked on linked to a brand page
click_u1_param          U1 parameter of the click
click_product_brand     Brand of the product that was clicked on
click_product_price     Price of the product that was clicked on
click_product_name      Name of the product that was clicked on
article_name            For clicks: this is the name of the article which has the link that was clicked on; For impressions: the Name of article that was viewed
link_id                 Unique identifier for each Howl link, sometimes referred to as auction ID.
network                 This identifies the payment model associated with the record - the values can be CPC, CPA, CPM, EPP
merchant                Merchant name of link
publication             Publisher name
link_type               Indicates if the link was created through a manual or programmatic process
channel                 Digital channel of the event i.e. desktop
device_type             Device event occurred on
country_code            ISO 3166-2 Country code
link_source             Detailed information on how link was created.
======================  ===========

Orders
^^^^^^

===========================  ===========
Column                       Description
===========================  ===========
order_product_id             Unique identifier for each record in the orders file, which is a combination of the order_id and the
product_id                   Unique identifier of the order product
order_id                     Unique identifier of the order generated by Howl
checkout_timestamp           Date time of the checkout in GMT
cookie_id                    The cookie ID
article_url                  URL of the page that has the link clicked attributed to this checkout
link_id                      Unique identifier for each Howl link, sometimes referred to as auction ID. This refers to the link attributed to this checkout. Please note this can be used to join the orders file.
referrer                     Referrer from web browser
user_agent                   User agent from web browser
network_type                 Type of network from where the checkout data is obtained - ‘Howl - No returns’ or ‘Rakuten - Returns Apply’
click_product_url            Product URL of the link that was clicked on, attributed to this checkout
click_product_category       Category of the product that was clicked on
click_is_brand_page          Boolean: true is the attributed link that was clicked on linked to a brand page
days_since_attributed_click  Number of days since the click event attributed to this checkout
purchased_product_id         Product ID of the product purchased. This is the Merchant’s product ID
purchased_product_name       Name of the product purchased
purchased_product_brand      Brand of the product purchased
purchased_product_price      Price of the product purchased
click_u1_param               U1 parameter of the click attributed to this checkout
checkout_id                  Identifier of the checkout from the Merchant
earnings                     This contains EPP and Linkshare earnings. Please note for orders with multiple products, the earnings column for each row is the earnings for the total order, not that individual product within the order.
revenue                      Revenue driven by the order
number_products_purchased    Quantity of products purchased
click_product_brand          Brand of the product that was clicked on attributed to this checkout
click_product_price          Price of the product that was clicked on attributed to this checkout
click_product_name           Name of the product that was clicked on attributed to this checkout
article_name                 name of the article which has the link that was clicked on attributed to this checkout
network                      This identifies the payment model associated with the record - the values can be CPC, CPA, CPM, EPP. This can be used to pivot the earnings and identify how much the EPP earnings are, and how much the CPA earnings are
merchant                     Merchant name
publication                  Publisher Name
channel                      Digital channel of the event i.e. desktop
device_type                  Device event occurred on
country_code                 ISO 3166-2 Country code
click_id                     Unique identifier for each click event attributed to this checkout
click_timestamp              Date time in GMT of the click attributed to this checkout
===========================  ===========
